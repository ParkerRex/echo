# FRONTEND - PRODUCT REQUIREMENTS DOCUMENT (PRD)

## 1. Overview

This Product Requirements Document (PRD) outlines the specifications for the frontend application of the Video Processing Pipeline system. The frontend provides users (Content Creators, Administrators) with an interface to upload videos, monitor processing progress in real-time, review and edit AI-generated metadata, and manage the overall system. This document focuses on the core requirements for the application, which uses FastAPI WebSockets for real-time integration.

## 2. Project Goals

### 2.1 Primary Goals

-   Provide an intuitive user interface for interacting with the video processing pipeline.
-   Display real-time updates on video processing status using WebSockets.
-   Allow users to review and edit generated video metadata before publishing.
-   Integrate seamlessly with the backend FastAPI API.
-   Utilize FastAPI WebSocket connections for real-time features.
-   Maintain a responsive and modern user experience using React, TanStack Router, and shadcn/ui.
-   Ensure secure communication with the backend API, including authentication.

### 2.2 Success Metrics

-   Real-time status updates appear promptly after backend events.
-   Fast latency for typical API interactions.
-   High user satisfaction with the interface usability.
-   Successful implementation of WebSocket-based real-time features.
-   Successful integration with backend authentication (REQ-API-004).
-   No data inconsistencies related to real-time updates.

## 3. Frontend Architecture

The frontend is built using:

-   **Framework:** React (with Vite)
-   **Routing:** TanStack Router
-   **UI Components:** shadcn/ui & custom components
-   **API Communication:** Custom API client wrapper
-   **Real-time:** FastAPI WebSockets (Migration in progress from legacy Firebase)
-   **State Management:** To be determined/refined (e.g., Zustand, Jotai, TanStack Query)

## 4. Proposed Frontend Architecture Features

-   **Real-time Communication:**
    -   Establish a WebSocket connection to the backend FastAPI server upon user authentication.
    -   Subscribe to relevant topics/events for video processing jobs.
    -   Handle incoming WebSocket messages to update UI state.
    -   Implement robust connection management (reconnection logic).
-   **API Communication:**
    -   Utilize the API client for standard RESTful calls (uploading, fetching initial data, submitting edits).
    -   Integrate with backend JWT-based authentication.
-   **State Management:**
    -   Employ a suitable state management solution to handle asynchronous data (API & WebSocket) and synchronize UI state.

## 5. Key Features & Requirements

### 5.1 Core User Interface

**REQ-FE-001: Video Upload Interface**
-   Allow users to select and upload video files.
-   Provide feedback on upload progress.
-   Trigger backend processing via API call upon successful upload.

**REQ-FE-002: Processing Dashboard**
-   Display a list/grid of video processing jobs.
-   Show key information: thumbnail (if available), title, status, timestamp.
-   Update job statuses in real-time via WebSocket connection.
-   Allow navigation to individual video detail pages.

**REQ-FE-003: Video Detail View**
-   Display detailed information for a specific video processing job.
-   Show processing stages and their real-time status (pending, processing, completed, failed) via WebSockets.
-   Display generated metadata (transcript, title suggestions, etc.) as available.
-   Provide an interface for editing metadata (REQ-FE-004).

**REQ-FE-004: Metadata Editor**
-   Allow users to review and edit AI-generated metadata (title, description, tags).
-   Provide an interface to view/copy transcripts/subtitles.
-   Allow selection of the final thumbnail.
-   Save changes via API calls to the backend.

**REQ-FE-005: Real-time Updates**
-   Establish WebSocket connection upon login/load.
-   Receive and process real-time updates for job status and generated metadata.
-   Update relevant UI components without page reloads.
-   Handle connection errors and implement reconnection logic.

**REQ-FE-006: Authentication Interface**
-   Provide login/signup forms.
-   Handle authentication flow using backend API endpoints (REQ-API-004).
-   Manage user session (e.g., storing JWT tokens).
-   Protect authenticated routes.

### 5.2 Technical Requirements

**REQ-FE-TECH-001: WebSocket Integration**
-   Implement a robust WebSocket client service/hook.
-   Manage connection lifecycle (connect, disconnect, reconnect).
-   Handle message serialization/deserialization.
-   Subscribe/unsubscribe to relevant job updates.

**REQ-FE-TECH-002: Firebase Removal**
-   Identify and refactor components using legacy Firebase listeners.
-   Remove Firebase dependencies completely.

**REQ-FE-TECH-003: API Client Enhancement**
-   Update the API client to handle backend authentication (sending JWT tokens).
-   Ensure proper error handling.

**REQ-FE-TECH-004: State Management for Real-time Data**
-   Implement/refine a state management solution for real-time updates and API data synchronization.

**REQ-FE-TECH-005: Responsive Design**
-   Ensure the UI is responsive across major screen sizes.

**REQ-FE-TECH-006: Testing**
-   Implement unit, integration, and end-to-end tests covering core functionality, API interactions, and WebSocket updates.

## 6. User Stories (Frontend Focus)

*(Corresponds to backend User Stories where applicable)*

**US-FE-001: Video Upload** (Refines US-001)
-   As a content creator, I want a simple interface to upload my videos to start the processing workflow.
-   *Acceptance criteria:* UI allows file selection/drop; upload progress shown; notification on success.

**US-FE-002: Real-time Status Tracking** (Refines US-002)
-   As a content creator, I want to see the status of my video update automatically without refreshing.
-   *Acceptance criteria:* Status indicators change in real-time via WebSockets; progress reflects completed stages.

**US-FE-003: Metadata Review Interface** (Refines US-003)
-   As a content creator, I want a clear interface to review all generated metadata.
-   *Acceptance criteria:* Separate sections for metadata types; easy navigation; efficient data loading.

**US-FE-004: Metadata Editing Interface** (Refines US-003)
-   As a content creator, I want intuitive tools to modify generated metadata.
-   *Acceptance criteria:* Standard editing inputs; save triggers API call; feedback on save/error.

**US-FE-005: Publishing Trigger** (Refines US-004)
-   As a content creator, I want a "Publish" button to easily send the final video and metadata.
-   *Acceptance criteria:* Button enabled when processing complete; click triggers backend publishing API; UI feedback provided.

## 7. Migration Plan (Frontend)

A migration from Firebase real-time features to FastAPI WebSockets is currently underway. Detailed steps are outlined in `frontend/docs/fe-implementation-tasks.md`. The core process involves:
1.  Implementing a WebSocket client.
2.  Refactoring components to use WebSockets and the backend API instead of Firebase.
3.  Enhancing API client for authentication.
4.  Thorough testing.
5.  Removing Firebase dependencies.

## 8. Risks and Mitigations (Frontend)

**Risk: WebSocket Scalability/Reliability**
-   *Mitigation:* Robust client-side reconnection logic; scalable backend implementation; consider API polling fallback.

**Risk: State Management Complexity**
-   *Mitigation:* Choose appropriate library; careful state design; thorough testing.

**Risk: Backend API Changes**
-   *Mitigation:* Clear API contracts/versioning; integration tests.

**Risk: Cross-Browser WebSocket Issues**
-   *Mitigation:* Cross-browser testing; use standard APIs/compatible libraries.
